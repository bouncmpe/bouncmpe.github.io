{{/* 
  Show "Edit this page" only on Markdown-backed content 
  (regular pages + sections), not on taxonomy / term / home.
*/}}

{{ $file := .File }}
{{ $kind := .Kind }}

/* Only proceed if:
   - There is an associated file
   - Kind is "page" or "section"
   - File extension is markdown
*/
{{ if and $file
         (or (eq $kind "page") (eq $kind "section"))
         (or (eq $file.Ext "md") (eq $file.Ext "markdown")) }}

  {{ $repo   := .Site.Params.github.repo }}
  {{ $branch := .Site.Params.github.branch | default "main" }}
  {{ $url := "" }}

  {{ with $repo }}
    {{/* .Path is relative to /content/ ; adjust if your repo is different */}}
    {{ $url = printf "%s/edit/%s/%s" . $branch $file.Path }}
  {{ end }}

  {{ if $url }}
    <a href="{{ $url }}"
       class="edit-page-btn"
       title="Edit this page on GitHub"
       target="_blank" rel="noopener">
      <img src="/icons/github.svg" alt="Edit icon" width="16" height="16">
    </a>
  {{ end }}

{{ end }}


<style>
.edit-page {
  margin-top: 2rem;
  text-align: right;
}
.edit-button {
  background: #0366d6;
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  text-decoration: none;
  font-size: 0.9rem;
}
.edit-button:hover {
  background: #024ea1;
}
</style>
